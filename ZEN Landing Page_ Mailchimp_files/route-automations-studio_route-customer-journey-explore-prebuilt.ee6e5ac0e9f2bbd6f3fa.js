(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1350:function(e,t,n){"use strict";var r=n(5),a=n(0),c=n.n(a),i=n(856);t.a=function(){var e=Object(a.useRef)();return[Object(a.useCallback)((function(t){return c.a.createElement(i.a,Object(r.a)({targetRef:e},t))}),[e]),e]}},1351:function(e,t,n){e.exports={clickArea:"clickArea-FdEUf"}},2424:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return l}));var r=n(2337),a=function(e,t){switch(t){case r.rb:e*=r.Pb;break;case r.M:e*=r.Ob;break;case r.v:e*=r.Nb;break;case r.rc:e*=r.Qb;break;default:throw new Error("unknown time period")}return e},c=function(e){if(e>=r.Qb&&e%r.Qb==0)return r.rc;if(e>=r.Nb&&e%r.Nb==0)return r.v;if(e>=r.Ob&&e%r.Ob==0)return r.M;if(e>=r.Pb&&e%r.Pb==0)return r.rb;throw new Error("granularity smaller than minutes not supported")},i=function(e,t){switch(t){case r.rb:e/=r.Pb;break;case r.M:e/=r.Ob;break;case r.v:e/=r.Nb;break;case r.rc:e/=r.Qb;break;default:throw new Error("unknown time period")}return e},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Date(e.replace(" ","T"))},o=function(e,t){var n=l(e);return n.setDate(n.getDate()+t),n}},2444:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return l}));n(8),n(18);var r=n(16),a=function(e){var t=e.listId,n=e.recipeId,a=e.workflowName,c=void 0===a?null:a,i=e.pbjSettings,l=void 0===i?[]:i;return r.b.post("/prebuilt-journeys/create-workflow-with-recipe",JSON.stringify({list_id:t,recipe_id:n,workflow_name:c,settings:l})).then((function(e){if(!e.ok)throw new Error("Could not create journey from recipe: ".concat(e.statusText));return e.json()}))},c=function(){return r.b.get("/prebuilt-journeys/get-recipes-list").then((function(e){if(!e.ok)throw new Error("Could not get recipe list: ".concat(e.statusText));return e.json()}))},i=function(e){var t=e.recipeId;return r.b.post("/prebuilt-journeys/get-recipe",JSON.stringify({recipe_id:t})).then((function(e){if(!e.ok)throw new Error("Could not get pre-built journey: ".concat(e.statusText));return e.json()}))},l=function(e){var t=e.recipeId,n=e.listId;return r.b.post("/prebuilt-journeys/get-recipe-options",JSON.stringify({recipe_id:t,list_id:n})).then((function(e){if(!e.ok)throw new Error("Could not get pre-built journey options: ".concat(e.statusText));return e.json()}))}},2457:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(1221),a=n(89);function c(e){var t=e.count,n=e.offset,a=e.has_ecommerce_store,c=e.include_total_contacts,i=e.sort_field,l=e.sort_dir,o=e.exclude_fields;return r.b.get("lists",{count:t,offset:n,has_ecommerce_store:a,include_total_contacts:c,sort_field:i,sort_dir:l,exclude_fields:o})}var i=Object(a.b)(c);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a.d)(i,e)}},2545:function(e,t,n){"use strict";function r(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function a(e,t,n){return e.slice().sort(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DESC",n={newest:{asc:-1,desc:1},oldest:{asc:1,desc:-1}};return function(r,a){var c=new Date(r[e]),i=new Date(a[e]),l=0;return c<i?l=n.newest[t.toLowerCase()]:c>i&&(l=n.oldest[t.toLowerCase()]),l}}(t,n))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return!t[n].length||t[n].includes(e[n])}))}))}n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}))},2769:function(e,t,n){e.exports={visualMap:"visualMap-2PeWi",zoomContainer:"zoomContainer-7ZUTK",zoomIn:"zoomIn-2_daL",zoomOut:"zoomOut-2SdVy",manageStep:"manageStep-2BRNT",stepContainer:"stepContainer-3v8GJ",stepData:"stepData-1DDim",subtext:"subtext-KWAl9",stepIcon:"stepIcon-2Dqc1",stepColorApricot:"stepColorApricot-3akDr",stepColorKale:"stepColorKale-2REVY",stepColorPlum:"stepColorPlum-2u2Kj",stepIfElse:"stepIfElse-3D3gf",stepNoPill:"stepNoPill-3HGzm",stepYesPill:"stepYesPill-3W_fJ"}},2770:function(e,t,n){e.exports={recipeCardList:"recipeCardList-3kO2M",linkCard:"linkCard-3Dnef",recipeCard:"recipeCard-JDDzl",contentContainer:"contentContainer-2PNKR",linkCardCenter:"linkCardCenter-2mzii",cardDetails:"cardDetails-1XsOc",titleMarginBottom:"titleMarginBottom-lMSt9"}},2914:function(e,t,n){e.exports={previewMapContainer:"previewMapContainer-1FqXy",stepContainer:"stepContainer-3F4_4",triggerStep:"triggerStep-86P0P",secondStep:"secondStep-1uw-f",svgCenter:"svgCenter-1vcYv"}},2915:function(e,t,n){"use strict";var r=n(1),a=n(0),c=n.n(a),i=(n(3),n(9)),l=n.n(i),o=n(31),u=n(2337),s=n(4),f=n(2769),d=n.n(f),p=function(e){switch(e.stepValue){case u.a:return c.a.createElement(o.cc,null);case u.c:return c.a.createElement(o.p,null);case u.hc:return c.a.createElement(o.Vb,null);case u.ic:return c.a.createElement(o.hc,null);case u.jc:return c.a.createElement(o.Hb,null);default:return c.a.createElement(o.pc,null)}};t.a=function(e){var t,n=e.data,i=e.showIfElseIndicators,o=void 0===i||i,f=n.stepType,b=n.actionType,m=void 0===b?"":b,v=l()(d.a.stepContainer,(t={},Object(r.a)(t,d.a.stepColorApricot,f===u.jc),Object(r.a)(t,d.a.stepColorKale,f===u.gc),Object(r.a)(t,d.a.stepColorPlum,f===u.hc||f===u.ic),Object(r.a)(t,d.a.stepIfElse,f===u.hc&&o),t)),E=f===u.gc?m:f;return c.a.createElement(a.Fragment,null,c.a.createElement("div",{className:v},c.a.createElement("div",{className:d.a.stepIcon},c.a.createElement(p,{stepValue:E})),c.a.createElement("div",{className:d.a.stepData},c.a.createElement("div",null,c.a.createElement(s.Jb,{appearance:"small"},f===u.jc?n.triggerName:n.description)),c.a.createElement("div",null,n.subtext&&c.a.createElement(s.Jb,{className:d.a.subtext,appearance:"small"},n.subtext)))),f===u.hc&&o&&c.a.createElement("div",null,c.a.createElement(s.Jb,{className:d.a.stepNoPill,style:{left:u.W/2+u.W/u.V+"px"},appearance:"small"},"No"),c.a.createElement(s.Jb,{className:d.a.stepYesPill,style:{left:u.W/2-u.W/u.V+"px"},appearance:"small"},"Yes")))}},2916:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(89),a=n(2444),c=Object(r.b)(a.d);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.d)(c,e)}},2958:function(e,t,n){"use strict";var r=n(7),a=n(23),c=n(0),i=n.n(c),l=(n(3),n(31)),o=n(24),u=n(4),s=n(856),f=n(9),d=n.n(f),p=n(2914),b=n.n(p),m=function(){return i.a.createElement("svg",{width:"9",height:"145",viewBox:"0 0 9 145",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:b.a.svgCenter},i.a.createElement("path",{d:"M3 1.5a1.5 1.5 0 113 0v142a1.5 1.5 0 01-3 0V1.5z",fill:"#DEDDDC"}),i.a.createElement("circle",{cx:"4.5",cy:"40.5",r:"3.5",fill:"#A2A2A2",stroke:"#FFF",strokeWidth:"2"}))},v=n(2915),E=function(e){var t=e.recipe.previewSteps,n=t.triggerStep,r=t.secondStep;return i.a.createElement("div",{className:b.a.previewMapContainer},i.a.createElement(m,null),i.a.createElement("div",{className:d()(b.a.stepContainer,b.a.triggerStep)},i.a.createElement(v.a,{data:n,showIfElseIndicators:!1})),i.a.createElement("div",{className:d()(b.a.stepContainer,b.a.secondStep)},i.a.createElement(v.a,{data:r,showIfElseIndicators:!1})))},j=n(2770),O=n.n(j),g=n(20),C=function(e){var t=e.recipe,n=e.onClick,a=Object(s.b)(),l=Object(r.a)(a,2),f=l[0],d=l[1],p=Object(c.useState)(!1),b=Object(r.a)(p,2),m=b[0],v=b[1],j=t.id,C=t.name,h=n?function(){return n(j)}:function(){Object(g.a)("journeys","select pbj ",j,{})};return Object(c.useEffect)((function(){var e;m?e=setTimeout((function(){Object(g.a)("journeys","hover","".concat(j," pbj card"),{})}),500):clearTimeout(e)}),[m,j]),i.a.createElement("li",{className:O.a.recipeCard},i.a.createElement(f,{className:O.a.contentContainer,onMouseEnter:function(e){e.preventDefault(),v(!0)},onMouseLeave:function(e){e.preventDefault(),v(!1)},targetRef:d},i.a.createElement(u.tb,{gap:0},i.a.createElement(E,{recipe:t}),i.a.createElement("div",{className:O.a.cardDetails},i.a.createElement("div",{className:O.a.titleMarginBottom},i.a.createElement(u.Jb,{appearance:"large"},C)),i.a.createElement("div",null,i.a.createElement(o.b,{to:"/customer-journey/explore/prebuilt?id=".concat(j),onClick:h,ref:d},"Preview Journey"))))))},h=n(1),w=n(3979),y=n.n(w),k=n(2337);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.currentFilterOptions,n=e.onFilterChange,a=e.isDisabled,l=e.possibleFilterOptions,o=Object(c.useState)({}),s=Object(r.a)(o,2),f=s[0],d=s[1],p=Object.values(f).some((function(e){return e&&e.length>0})),b=function(e,t){n&&n(e,t),d(e)},m=function(e,t){return{selectedOptions:e,label:t}},v=function(e){b(D(D({},f),{},Object(h.a)({},k.yb,e)),m(function(e){return l[k.yb].filter((function(t){return e.includes(t.id)})).map((function(e){return e.val}))}(e),"objectives filter"))},E=function(e,n){switch(n){case k.N:return!t[n].some((function(t){return t.id===e}));case k.qc:return!t[n].includes(e);case k.yb:return void 0!==f[k.N]&&f[k.N].length>0?!t[n].some((function(t){return t.id===e})):!l[n].some((function(t){return t.id===e}));default:return!1}};return i.a.createElement("div",null,i.a.createElement("div",{className:y.a.filterContent},i.a.createElement("div",{className:y.a.filterWrapper},i.a.createElement("div",null,i.a.createElement(u.nb,{disabled:a,label:i.a.createElement(u.Jb,{appearance:"small-bold"},"Vertical:"),placeholder:"All",value:f[k.qc]||[],onChange:function(e){return function(e){b(D(D({},f),{},Object(h.a)({},k.qc,e)),m(e,"verticals filter"))}(e)},multiple:!0},l[k.qc].map((function(e){return i.a.createElement(u.W,{key:e,label:e,value:e,disabled:E(e,k.qc)},e)})))),i.a.createElement("div",null,i.a.createElement(u.nb,{disabled:a,label:i.a.createElement(u.Jb,{appearance:"small-bold"},"Objective:"),placeholder:"All",value:f[k.yb]||[],onChange:function(e){return v(e)},multiple:!0},l[k.yb].map((function(e){var t=e.id,n=e.val;return i.a.createElement(u.W,{key:t,label:n,value:t,disabled:E(t,k.yb)},n)})))),i.a.createElement("div",null,i.a.createElement(u.nb,{disabled:a,label:i.a.createElement(u.Jb,{appearance:"small-bold"},"Use with:"),placeholder:"All",value:f[k.N]||[],onChange:function(e){return function(e){b(D(D({},f),{},Object(h.a)({},k.N,e)),m(e,"use with filter"))}(e)},multiple:!0},l[k.N].map((function(e){var t=e.id,n=e.val;return i.a.createElement(u.W,{key:t,label:n,value:t,disabled:E(t,k.N)},n+"s")})))),p&&i.a.createElement("div",null,i.a.createElement(u.Kb,{disabled:a,onClick:function(){b({})}},"Clear all")))))},_=function(e){var t=e.icon,n=Object(s.b)(),a=Object(r.a)(n,2),l=a[0],u=a[1],f=Object(c.useState)(!1),d=Object(r.a)(f,2),p=d[0],b=d[1];return Object(c.useEffect)((function(){var e;p?e=setTimeout((function(){Object(g.a)("journeys","hover","create from scratch card",{})}),500):clearTimeout(e)}),[p]),i.a.createElement("li",{className:O.a.linkCard},i.a.createElement(l,{className:O.a.contentContainer,onMouseEnter:function(e){e.preventDefault(),b(!0)},onMouseLeave:function(e){e.preventDefault(),b(!1)},targetRef:u},i.a.createElement("div",{className:O.a.linkCardCenter},i.a.createElement("span",null,t),i.a.createElement("div",null,i.a.createElement(o.b,{to:"/customer-journey/create-new-journey/",onClick:function(){Object(g.a)("journeys","click create from scratch","",{})},ref:u},"Create from scratch")))))},S=n(6),x=function(e){var t={};t[k.N]=Object.values(e.flatMap((function(e){return e[k.N]})).reduce((function(e,t){return e[t.id]=t,e}),{})).filter((function(e){return"integration_audience"!==e.id})),t[k.qc]=Object(a.a)(new Set(Object.values(e.flatMap((function(e){return e[k.qc]})))));var n=e.flatMap((function(e){return k.X.filter((function(t){return t.id===e.intent}))}));return t[k.yb]=Object(a.a)(new Set(n)),t};t.a=function(e){var t=e.recipes,n=e.includeCreateCard,a=void 0===n||n,o=e.includeFilters,u=void 0===o||o,s=e.onRecipeCardClicked,f=Object(c.useState)(t),d=Object(r.a)(f,2),p=d[0],b=d[1],m=Object(S.d)(S.a.d09a09d88d7aa9e6606ba1ce4df3b4c7)&&u;return i.a.createElement("div",null,i.a.createElement("section",null,m&&i.a.createElement("div",null,i.a.createElement(P,{currentFilterOptions:x(p),onFilterChange:function(e,n){var r=function(e){var t=e.recipes,n=e.selectedFilters,r=n.integrations,a=n.verticals,c=n.objectives;return r=r||[],a=a||[],c=c||[],t.filter((function(e){return!(r.length>0&&!r.every((function(t){return e[k.N].map((function(e){return e.id})).includes(t)})))&&!(a.length>0&&!a.every((function(t){return e[k.qc].includes(t)})))&&(!(c.length>0)||c.find((function(t){return e.intent===t})))}))}({recipes:t,selectedFilters:e});b(r),n&&Object.keys(n).length>0&&Object(g.a)("journeys","filter journeys",n.label,{dimension57:r.length,dimension86:n.selectedOptions.join(", ")})},possibleFilterOptions:x(t),results:p.length})),i.a.createElement("ul",{className:O.a.recipeCardList},a&&i.a.createElement(_,{key:"create_from_scratch_link",icon:i.a.createElement(l.b,null)}),p&&p.map((function(e){return i.a.createElement(C,{onClick:s,key:e.id,recipe:e})})))))}},3979:function(e,t,n){e.exports={filterContent:"filterContent-TGw0h",filterWrapper:"filterWrapper-ipkNT"}},856:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d.a}));var r=n(5),a=n(14),c=n(0),i=n.n(c),l=(n(3),n(9)),o=n.n(l),u=n(1351),s=n.n(u),f=i.a.forwardRef((function(e,t){var n=e.as,l=void 0===n?"div":n,u=e.children,f=e.className,d=e.onClick,p=e.targetRef,b=Object(a.a)(e,["as","children","className","onClick","targetRef"]),m=Object(c.useCallback)((function(e){var t=p.current;t&&(e.defaultPrevented||(t.contains(e.target)?d&&d(e):(e.stopPropagation(),e.preventDefault(),t.focus(),t.click())))}),[d,p]);return i.a.createElement(l,Object(r.a)({ref:t},b,{className:o()(s.a.clickArea,f),onClick:m}),u)})),d=n(1350)}}]);
//# sourceMappingURL=route-automations-studio~route-customer-journey-explore-prebuilt.ee6e5ac0e9f2bbd6f3fa.js.map