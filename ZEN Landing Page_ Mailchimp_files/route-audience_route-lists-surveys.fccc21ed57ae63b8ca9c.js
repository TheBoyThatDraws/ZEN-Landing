(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{2346:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return D})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return w})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return j})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return P})),n.d(t,"c",(function(){return A})),n.d(t,"n",(function(){return S})),n.d(t,"o",(function(){return _}));var a=n(8),r=n.n(a),c=n(18),o=n(7),i=n(1),s=n(0),u=n.n(s),l=(n(3),n(2360)),d=n(16);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=u.a.createContext(null),f=u.a.createContext(null),E={segment:{},source:"",title:"",type:""};function O(e,t){switch(t.type){case"SET_REQUEST_PENDING":return b(b({},e),{},{isRequestPending:t.payload});case"SET_REQUEST_FAILED":return b(b({},e),{},{didRequestFail:!0,errorMessage:t.payload});case"TOGGLE_DISMISS_RECONFIRM_MODAL":return b(b({},e),{},{isDismissReconfirmModalOpen:!e.isDismissReconfirmModalOpen});case"RECEIVE_FEEDBACK":return b(b({},e),{},{feedback:t.payload});case"SET_COMPLIANCE_DATA":return b(b({},e),{},{complianceData:t.payload});case"TOGGLE_COMBINE_MODAL":return b(b({},e),{},{isCombineModalOpen:t.payload});case"SET_AUDIENCE":return b(b({},e),t.payload);case"OPEN_CAMPAIGN_MODAL":return b(b({},e),{},{condition:t.payload,isTargetCampaignModalOpen:!0});case"CLOSE_CAMPAIGN_MODAL":return b(b({},e),{},{condition:E,didRequestFail:!1,isTargetCampaignModalOpen:!1,errorMessage:null});default:return e}}var h=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a,c,o){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_REQUEST_PENDING",payload:!0}),e.prev=1,e.next=4,Object(l.b)(n,a.segment,o);case 4:i=e.sent,s=i.segment.id,e.t0=c,e.next="ad"===e.t0?9:"postcard"===e.t0?11:13;break;case 9:return window.location.assign("/ads/create?list_id=".concat(n,"&source_id=saved:").concat(s,"&type=facebook")),e.abrupt("break",14);case 11:return window.location.assign("/postcards/create?segment_id=".concat(s,"&budget_in_usd=25")),e.abrupt("break",14);case 13:case 14:e.next=20;break;case 16:throw e.prev=16,e.t1=e.catch(1),t({type:"SET_REQUEST_FAILED",payload:"Error creating segment. Please try again."}),e.t1;case 20:return e.prev=20,t({type:"SET_REQUEST_PENDING",payload:!1}),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,16,20,23]])})));return function(t,n,a,r,c){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"SET_REQUEST_PENDING",payload:!0}),e.prev=1,e.next=4,Object(l.h)(n,c);case 4:window.location.assign(a);case 5:return e.prev=5,t({type:"SET_REQUEST_PENDING",payload:!1}),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),g=function(e,t){e({type:"RECEIVE_FEEDBACK",payload:t})},C=function(e){e({type:"RECEIVE_FEEDBACK",payload:void 0})},w=function(e){e({type:"TOGGLE_DISMISS_RECONFIRM_MODAL"})},v=function(e,t){e({type:"SET_COMPLIANCE_DATA",payload:t})},j=function(e,t){e({type:"SET_REQUEST_PENDING",payload:t})},P=function(e,t){e({type:"TOGGLE_COMBINE_MODAL",payload:t})},k=function(e,t){e({type:"SET_AUDIENCE",payload:t})},D=function(e,t){e({type:"OPEN_CAMPAIGN_MODAL",payload:t})},N=function(e){e({type:"CLOSE_CAMPAIGN_MODAL"})},A=function(e,t){var n=new FormData;return n.append("key",e),n.append("value",t),d.b.post("/app-homepage/save-user-setting",n)},S=function(){return Object(s.useContext)(p)},_=function(){return Object(s.useContext)(f)};t.b=function(e){var t=e.children,n=e.complianceData,a=e.contactCount,r=e.hasCPLUMPaywall,c=e.hasPDData,i=e.hasPDPaywall,l=e.isCPLUMDataEnabled,d=e.isPDEnabled,m=e.listId,h=e.listName,y=e.lists,g=e.recommendedCampaignForResend,C=e.subscriberCount,w=e.userSegmentId,v=e.hasDismissedMobileInfoBanner,j={complianceData:n,contactCount:a,condition:E,didRequestFail:!1,errorMessage:null,feedback:null,hasCPLUMPaywall:r,hasPDData:c,hasPDPaywall:i,isCPLUMDataEnabled:l,isPDEnabled:d,listId:m,listName:h,lists:y,isCombineModalOpen:!1,isDismissReconfirmModalOpen:!1,isRequestPending:!1,isTargetCampaignModalOpen:!1,isUpsellMomentShown:!1,recommendedCampaignId:g,subscriberCount:C,hasDismissedMobileInfoBanner:v};"URLSearchParams"in window&&new URLSearchParams(window.location.search.substring(1)).get("forcePDProcessingMode")&&(j.hasPDData=!1,j.hasPDPaywall=!1);var P=Object(s.useReducer)(O,j),k=Object(o.a)(P,2),D=k[0],N=k[1],A=Object(s.useMemo)((function(){return b(b({},D),{},{userSegmentId:w})}),[D,w]);return u.a.createElement(p.Provider,{value:N},u.a.createElement(f.Provider,{value:A},t))}},2360:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return f}));var a=n(8),r=n.n(a),c=n(18),o=n(16);function i(e,t,n){var a={id:e,stats:t.join(",")};n&&(a.optinSince=n);var r=o.b.query("/lists/overview-api/stats-json",a);return o.b.get(r).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not get overview data for ".concat(t.join(","),". Error ").concat(e.status,": ").concat(e.statusText)))}))}function s(e){var t={id:e},n=o.b.query("/audience/get-audience-data",t);return o.b.get(n).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not get audience data. Error ".concat(e.status,": ").concat(e.statusText)))}))}function u(e){var t={id:e,overwrite_all:!1},n=o.b.query("/lists/switcher/set-selected-audience",t);return o.b.get(n).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not switch audience. Error ".concat(e.status,": ").concat(e.statusText)))}))}function l(e,t){var n={list_id:e},a=o.b.query("/lists/segments/members/storeJson",n),r=new FormData;return r.append("segment",JSON.stringify(t)),o.b.post(a,r).then((function(e){return e.ok?Promise.resolve(e):Promise.reject(new Error("Could not set segment in session. Error ".concat(e.status,": ").concat(e.statusText)))}))}function d(e,t,n){var a={id:e},r=o.b.query("/lists/segments/create-saved-segment",a),c=new FormData;return c.append("segment",JSON.stringify(t)),c.append("name",n),o.b.post(r,c).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not create segment. Error ".concat(e.status,": ").concat(e.statusText)))}))}function m(e,t,n){var a={id:t,"combine-with-list":e,"is-from-audience-overview":!0};n&&(a["combine-group"]=JSON.stringify(n));var r=o.b.query("/lists/combine",a);return o.b.post(r).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not combine audiences. Error ".concat(e.status,": ").concat(e.statusText)))}))}function b(e){var t={id:e},n=o.b.query("/lists/dismiss-reconfirm",t);return o.b.post(n).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not dismiss reconfirm compliance alert. Error ".concat(e.status,": ").concat(e.statusText)))}))}function p(e){var t={id:e},n=o.b.query("/audience/get-audience-compliance-data",t);return o.b.get(n).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not get compliance data for audience. Error ".concat(e.status,": ").concat(e.statusText)))}))}function f(e,t){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(r.a.mark((function e(t,n){var a,c,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("resend-to-nonopeners",!0),a.append("id",n),e.next=5,o.b.post("/campaigns/replicate",a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not replicate campaign. Error ".concat(e.status,": ").concat(e.statusText)))}));case 5:return c=e.sent,i={id:t,clicked:!0},s=o.b.query("/audience/set-recommendation-user-setting",i),e.next=10,o.b.post(s).then((function(e){return e.ok?e.json():Promise.reject(new Error("Could not save recommendation user setting. Error ".concat(e.status,": ").concat(e.statusText)))}));case 10:window.location.assign("/campaigns/edit?id=".concat(c.id));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2871:function(e,t,n){e.exports={audienceName:"audienceName-28mBq",audienceCount:"audienceCount-2Jcie",viewAudiences:"viewAudiences-33eRY"}},2874:function(e,t,n){e.exports={container:"container-celSC",header:"header-2V8gI",singleAudienceHeader:"singleAudienceHeader-UEOMc",dropdownLabel:"dropdownLabel-h-A5N",audienceCounts:"audienceCounts-2QS1f",audienceContainer:"audienceContainer-3axU2"}},3171:function(e,t,n){e.exports={container:"container-12K4U",dropdownButton:"dropdownButton-3hxSU",subContainer:"subContainer-3Q_69",combineText:"combineText-FsBaT",downloadLink:"downloadLink-2KaCm",buttonContainer:"buttonContainer-3GdAl"}},4776:function(e,t,n){"use strict";var a=n(8),r=n.n(a),c=n(1),o=n(18),i=n(0),s=n.n(i),u=(n(3),n(34)),l=n(73),d=n(20),m=n(2360),b=n(24),p=n(2346),f=n(5278),E=n(7),O=n(471),h=n(256),y=n(330),g=n(255),C=n(3171),w=n.n(C);var v=function(e){var t=e.audiences,n=e.audienceId,a=e.audienceName,r=e.onReceiveFeedback,c=e.onSwitchAudience,o=Object(p.n)(),l=Object(p.o)(),b=l.isCombineModalOpen,f=l.isRequestPending,C=Object(i.useState)(null),v=Object(E.a)(C,2),j=v[0],P=v[1],k=Object(i.useState)(""),D=Object(E.a)(k,2),N=D[0],A=D[1],S=Object(i.useState)("Audiences"),_=Object(E.a)(S,2),M=_[0],I=_[1],T=Object(i.useState)([]),x=Object(E.a)(T,2),R=x[0],L=x[1],F=Object(i.useState)(!1),B=Object(E.a)(F,2),U=B[0],G=B[1],q=function(){Object(p.m)(o,!1),P(null),A(""),I("Audiences"),L([]),G(!1)},V=function(e){Object(d.a)("AO Beta Combine Modal",e)},Q=function(){q(),V("cancel")},H=t.filter((function(e){return e.id!==n}));return s.a.createElement(g.a,{ariaLabel:"Modal to allow for the combining of audiences",isOpen:b,onRequestClose:function(){q(),V("close")}},s.a.createElement(g.a.Body,null,s.a.createElement("div",{className:w.a.container},U?s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"Before you combine audiences..."),s.a.createElement("p",null,"When you combine audiences, you will lose some data."," ",s.a.createElement("a",{href:"https://mailchimp.com/help/use-combine-audiences-tool/",target:"_blank",rel:"noopener noreferrer"},"Here’s more information")," ","on how to keep as much data as possible, as well as the specific data that is lost when you combine audiences. We recommend you download both audiences to make sure you keep your contact data."),s.a.createElement("p",null,"If you used our GDPR-friendly forms, we do not recommend that you combine your audiences at this time."),s.a.createElement("div",{className:w.a.subContainer},s.a.createElement("a",{className:w.a.downloadLink,href:"lists/members/export?id=".concat(n),target:"_blank",rel:"noopener noreferrer"},"Download ",a),s.a.createElement("br",null),s.a.createElement("a",{className:w.a.downloadLink,href:"lists/members/export?id=".concat(j.id),target:"_blank",rel:"noopener noreferrer"},"Download ",j.name)),s.a.createElement(y.a,{id:"combine-confirmation",label:"Type CONFIRM to confirm",onChange:function(e){return function(e){A(e)}(e)},value:N}),s.a.createElement("div",{className:w.a.buttonContainer},s.a.createElement(u.a,{isLoading:f||"CONFIRM"!==N,onClick:function(){V("combine"),Object(p.k)(o,!0),Object(m.a)(j.id,n,R.length>0?R:null).then((function(e){c(j,e)})).catch((function(e){throw r({type:"error",message:"Could not combine audiences now. Please try again."}),Object(p.k)(o,!1),q(),e})).then((function(){Object(p.k)(o,!1),q()}))},type:"primary"},"Combine Audiences"),s.a.createElement(u.a,{onClick:Q,type:"tertiary"},"Cancel"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"Combine Audience"),s.a.createElement("p",{className:w.a.combineText},'Combine "',a,'" with which audience?'),s.a.createElement(h.c,{label:M,hasMaxHeight:!0},H.map((function(e){return s.a.createElement(h.a,{key:e.id,label:e.name,onClick:function(){return function(e){P(e),I(e.name),L([])}(e)}})}))),j&&Object.keys(j.groupData).length>0&&s.a.createElement("div",{className:w.a.subContainer},s.a.createElement("p",{className:w.a.combineText},"Put contacts into these ",j.name," groups."),Object.keys(j.groupData).map((function(e){return s.a.createElement("div",{key:e},s.a.createElement(O.a,{id:e,label:j.groupData[e],onChange:function(){return function(e){var t=R.slice(0),n=R.indexOf(e);n>=0?t.splice(n,1):t.push(e),L(t)}(e)},value:R.includes(e)}))}))),s.a.createElement("div",{className:w.a.buttonContainer},s.a.createElement(u.a,{isLoading:!j,onClick:function(){G(!0),V("next")},type:"secondary"},"Next"),s.a.createElement(u.a,{onClick:Q,type:"tertiary"},"Cancel"))))))};n(6);var j=function(e){var t=e.className,n=e.isCombineAudiencesFlagEnabled,a=e.listCount,r=e.listId,c=e.onCombineModalOpen,o=function(e){var t={category:"AO Beta Audience Settings",action:e};Object(d.a)(t.category,t.action)};return s.a.createElement(h.c,{className:t,label:"Manage Audience",onOpen:function(){return o("Audience Settings Drop Down")}},s.a.createElement(h.a,{href:"/lists/members/add?id=".concat(r),label:"Add a subscriber",onClick:function(){return o("Add a subscriber")}}),s.a.createElement(h.a,{href:"/lists/members/import?id=".concat(r),label:"Import contacts",onClick:function(){return o("Import contacts")}}),s.a.createElement(h.a,{href:"/lists/dashboard/signup-forms?id=".concat(r),label:"Signup forms",onClick:function(){return o("Signup forms")}}),s.a.createElement(h.a,{href:"/lists/surveys?id=".concat(r),label:"Surveys",onClick:function(){return o("Surveys")}}),s.a.createElement(h.a,{href:"/audience/inbox?id=".concat(r),label:"Inbox",onClick:function(){return o("Inbox")}}),s.a.createElement(h.a,{href:"/lists/dashboard/manage-subscribers?id=".concat(r),label:"Manage contacts",onClick:function(){return o("Manage contacts")}}),s.a.createElement(h.a,{href:"/lists/settings?id=".concat(r),label:"Settings",onClick:function(){return o("Settings")}}),a>1&&n&&s.a.createElement(h.a,{label:"Combine audiences",onClick:function(){c(),o("Combine audience")}}),s.a.createElement(h.a,{href:"/lists",label:"View audiences",onClick:function(){return o("View audiences")}}))},P=n(2874),k=n.n(P);var D=function(e){var t=e.currentAudience,n=e.handleCombineModalOpen,a=e.isCombineAudiencesFlagEnabled,r=e.lists;return s.a.createElement("div",{className:k.a.buttonContainer},s.a.createElement(b.a,{className:k.a.button,to:"/lists/members/clear-and-view?id=".concat(t.id),type:"secondary",onClick:function(){return Object(d.a)("audience","cta","button",{cd53:"View Contacts",cd54:"/lists/members/clear-and-view?id=".concat(t.id),cd56:"Redirects to Contact Table"})}},"View Contacts"),s.a.createElement(j,{className:k.a.button,isCombineAudiencesFlagEnabled:a,listCount:r.length,listId:t.id,onCombineModalOpen:n}))};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.isCombineAudiencesFlagEnabled,n=e.actions,a=void 0===n?D:n,c=e.customHandleSwitchList,E=Object(p.o)(),O=E.contactCount,h=E.listId,y=E.listName,g=E.lists,C=E.subscriberCount,w=Object(p.n)(),j={id:h,name:y},P=Object(i.useCallback)((function(e){e.preventDefault();Object(d.a)("AO Beta page interaction","Direct to subscribers"),Object(p.l)(w,h,"/lists/members?id=".concat(j.id,"&previewName=Subscribers"),{match:"all",conditions:[{field:"contact_status",op:"status_is",value:["Y"]}]})}),[j.id,w,h]),N=function(){var e=Object(o.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(p.k)(w,!0),e.next=4,Object(m.d)(t.id);case 4:return a=e.sent,e.next=7,Object(m.i)(t.id);case 7:Object(p.i)(w,A(A({},a),{},{feedback:n})),"function"==typeof c&&c(t);case 9:return e.prev=9,Object(p.k)(w,!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,,9,12]])})));return function(t,n){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:k.a.container},s.a.createElement("div",{className:k.a.audienceContainer},1===g.length?s.a.createElement("h2",{className:"h3 ".concat(k.a.singleAudienceHeader)},j.name):s.a.createElement("div",null,s.a.createElement("p",{className:k.a.dropdownLabel},"Current audience"),s.a.createElement(f.a,{audiences:g,currentAudience:j,onSwitch:N})),s.a.createElement("h2",{className:"h4 ".concat(k.a.audienceCounts)},"This audience has"," ",s.a.createElement(b.b,{to:"/lists/members/clear-and-view?id=".concat(j.id),onClick:function(){return Object(d.a)("AO Beta page interaction","Direct to list")}},Object(l.c)(O))," ","contacts."," ",s.a.createElement(u.a,{className:k.a.tertiaryButton,onClick:P,type:"tertiary"},Object(l.c)(C))," ","of them are subscribers.")),s.a.createElement(a,{currentAudience:j,isCombineAudiencesFlagEnabled:t,lists:g,handleCombineModalOpen:function(){Object(p.m)(w,!0)}})),t&&s.a.createElement(v,{audiences:g,audienceId:h,audienceName:y,onSwitchAudience:N,onReceiveFeedback:function(e){Object(p.g)(w,e)}}))}},5278:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(28),r=n(30),c=n(39),o=n(42),i=n(29),s=n(1),u=n(0),l=n.n(u),d=(n(3),n(256)),m=n(73),b=n(20),p=n(2871),f=n.n(p);var E=function(e){var t=e.count,n=e.name;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:f.a.audienceName},n),l.a.createElement("p",{className:f.a.audienceCount},t," ","1"===t?"contact":"contacts"))};function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(i.a)(e);if(t){var r=Object(i.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=O(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.audiences,n=e.currentAudience,a=e.onSwitch,r=e.showViewAudiencesButton;return l.a.createElement(d.c,{hasMaxHeight:!0,label:n.name},t.map((function(e){return e.id===n.id?null:l.a.createElement(d.a,{key:e.id,label:l.a.createElement(E,{name:e.name,count:Object(m.c)(e.contactCount)}),onClick:function(){return a(e)}})})),r&&l.a.createElement(d.a,{href:"/lists",label:l.a.createElement("p",{className:f.a.viewAudiences},"View audiences"),onClick:function(){return Object(b.a)("AO Beta page interaction","View audiences from switcher")}}))}}]),n}(u.Component);Object(s.a)(h,"defaultProps",{showViewAudiencesButton:!0})}}]);
//# sourceMappingURL=route-audience~route-lists-surveys.fccc21ed57ae63b8ca9c.js.map